ORG     8000H
        AJMP    START       
        ORG     8100H
START:  MOV     SP,#60H
        MOV     TMOD,#10H    ;置T1为方式1
		SETB    TR1	         ;启动T1 
LOOP1: 	MOV		P1,#0FFH
		MOV		A,P1
		MOV		R5,A
		CPL		A
		JZ		LOOP1
		CJNE	A,#01H,LOOP2
		SJMP	DO
LOOP2:	CJNE	A,#02H,LOOP3
		SJMP	RA
LOOP3:	CJNE	A,#04H,LOOP4
		SJMP	MI
LOOP4:	CJNE	A,#08H,LOOP5
		SJMP	FA
LOOP5:	CJNE	A,#10H,LOOP6
		SJMP	SO
LOOP6:	CJNE	A,#20H,LOOP7
		SJMP	LA
LOOP7:	CJNE	A,#40H,LOOP8
		SJMP	XI
LOOP8:	CJNE	A,#80H,LOOP1
		SJMP	HDO
		SJMP	LOOP1

DO:		MOV		R7,#0F9H
		MOV		R6,#21H
		SJMP	LOOP
RA:		MOV		R7,#0F9H
		MOV		R6,#0E0H
		SJMP	LOOP
MI:		MOV		R7,#0FAH
		MOV		R6,#08BH
		SJMP	LOOP
FA:		MOV	R7,#0FAH
		MOV	R6,#0D7H
		SJMP	LOOP
SO:		MOV	R7,#0FBH
		MOV	R6,#67H
		SJMP	LOOP
LA:		MOV	R7,#0FBH
		MOV	R6,#0E8H
		SJMP	LOOP
XI:		MOV	R7,#0FCH
		MOV	R6,#5BH
		SJMP	LOOP
HDO:	MOV	R7,#0FCH
		MOV	R6,#8EH
		SJMP	LOOP

LOOP:	LCALL	MUSIC
		SJMP	LOOP1
MUSIC:  MOV     TL1,R6   ;设定时0.5mS初值
        MOV     TH1,R7
        
LOOP9:	JNB		TF1,$
		CLR		TF1
		MOV     TL1,R6   ;重装0.5mS初值
        MOV     TH1,R7		
		CPL		P3.3	;有按键操作时驱动蜂鸣器
		MOV		A,P1
		CPL		A
		JNZ		LOOP9
		SETB	P3.3
DOWN:   RET
        END
